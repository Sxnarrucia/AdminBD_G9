-- Tabla Clientes
CREATE TABLE Clientes (
    ClienteID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR2(100) NOT NULL,
    Apellido VARCHAR2(100) NOT NULL,
    Email VARCHAR2(100) NOT NULL UNIQUE,
    Telefono VARCHAR2(20),
    FechaRegistro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Activo NUMBER(1) DEFAULT 1
);

-- Tabla Mesas
CREATE TABLE Mesas (
    MesaID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NumeroMesa NUMBER NOT NULL,
    Capacidad NUMBER NOT NULL,
    Ubicacion VARCHAR2(100)
);

-- Tabla Reservas
CREATE TABLE Reservas (
    ReservaID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ClienteID NUMBER NOT NULL,
    MesaID NUMBER NOT NULL,
    FechaReserva TIMESTAMP NOT NULL,
    NumeroPersonas NUMBER NOT NULL,
    Estado VARCHAR2(50) DEFAULT 'Pendiente',
    CONSTRAINT FK_Reserva_Cliente FOREIGN KEY (ClienteID) REFERENCES Clientes(ClienteID),
    CONSTRAINT FK_Reserva_Mesa FOREIGN KEY (MesaID) REFERENCES Mesas(MesaID)
);

-- Tabla Menus
CREATE TABLE Menus (
    MenuID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR2(100) NOT NULL,
    Descripcion VARCHAR2(255),
    Precio NUMBER(10, 2) NOT NULL,
    Disponible NUMBER(1) DEFAULT 1
);

-- Tabla Pedidos
CREATE TABLE Pedidos (
    PedidoID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ReservaID NUMBER NOT NULL,
    FechaPedido TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Total NUMBER(10, 2) NOT NULL,
    CONSTRAINT FK_Pedido_Reserva FOREIGN KEY (ReservaID) REFERENCES Reservas(ReservaID)
);

-- Tabla DetallePedidos
CREATE TABLE DetallePedidos (
    DetallePedidoID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    PedidoID NUMBER NOT NULL,
    MenuID NUMBER NOT NULL,
    Cantidad NUMBER NOT NULL,
    Precio NUMBER(10, 2) NOT NULL,
    CONSTRAINT FK_DetallePedido_Pedido FOREIGN KEY (PedidoID) REFERENCES Pedidos(PedidoID),
    CONSTRAINT FK_DetallePedido_Menu FOREIGN KEY (MenuID) REFERENCES Menus(MenuID)
);

-- Tabla Empleados
CREATE TABLE Empleados (
    EmpleadoID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR2(100) NOT NULL,
    Apellido VARCHAR2(100) NOT NULL,
    Cargo VARCHAR2(100),
    FechaContratacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Activo NUMBER(1) DEFAULT 1
);

-- Tabla Restaurantes
CREATE TABLE Restaurantes (
    RestauranteID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR2(100) NOT NULL,
    Direccion VARCHAR2(255),
    Telefono VARCHAR2(20),
    Email VARCHAR2(100) UNIQUE
);
